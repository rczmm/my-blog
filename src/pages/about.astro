---
import BaseLayout from '../layouts/BaseLayout.astro';

// è·å–æ–‡ç« ç»Ÿè®¡ä¿¡æ¯
const allPosts = await Astro.glob('./posts/*.md');
const totalPosts = allPosts.length;
const totalTags = new Set(allPosts.flatMap(post => post.frontmatter.tags || [])).size;

// è®¡ç®—åšå®¢è¿è¡Œå¤©æ•°
const startDate = new Date('2023-01-01');
const today = new Date();
const daysDiff = Math.ceil((today.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));

// æŠ€èƒ½æ•°æ®
const skills = [
  { name: 'JavaScript', level: 90, color: '#f7df1e' },
  { name: 'TypeScript', level: 85, color: '#3178c6' },
  { name: 'React', level: 88, color: '#61dafb' },
  { name: 'Vue.js', level: 82, color: '#4fc08d' },
  { name: 'Node.js', level: 80, color: '#339933' },
  { name: 'CSS/Sass', level: 85, color: '#1572b6' },
  { name: 'Astro', level: 75, color: '#ff5d01' },
  { name: 'Git', level: 88, color: '#f05032' }
];

// æ—¶é—´çº¿æ•°æ®
const timeline = [
  {
    year: '2023',
    title: 'å¼€å§‹æŠ€æœ¯åšå®¢',
    description: 'åˆ›å»ºäº†è¿™ä¸ªåšå®¢ï¼Œå¼€å§‹åˆ†äº«æŠ€æœ¯å­¦ä¹ å¿ƒå¾—',
    icon: 'ğŸš€'
  },
  {
    year: '2022',
    title: 'å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ',
    description: 'å¼€å§‹ä»äº‹å…¨æ ˆå¼€å‘å·¥ä½œï¼Œä¸»è¦ä½¿ç”¨ React å’Œ Node.js',
    icon: 'ğŸ’¼'
  },
  {
    year: '2021',
    title: 'å‰ç«¯è¿›é˜¶',
    description: 'æ·±å…¥å­¦ä¹ ç°ä»£å‰ç«¯æ¡†æ¶å’Œå·¥ç¨‹åŒ–å·¥å…·',
    icon: 'ğŸ“ˆ'
  },
  {
    year: '2020',
    title: 'ç¼–ç¨‹å…¥é—¨',
    description: 'å¼€å§‹å­¦ä¹ ç¼–ç¨‹ï¼Œä» HTML/CSS/JavaScript å¼€å§‹',
    icon: 'ğŸŒ±'
  }
];
---

<BaseLayout title="å…³äºæˆ‘ - æˆ‘çš„åšå®¢">
  <div class="about-container">
    <!-- ä¸ªäººä»‹ç»å¡ç‰‡ -->
    <section class="hero-card">
      <div class="hero-content">
        <div class="avatar-section">
          <div class="avatar">ğŸ‘¨â€ğŸ’»</div>
          <div class="status-indicator">
            <span class="status-dot"></span>
            <span class="status-text">æ­£åœ¨ç¼–ç ä¸­</span>
          </div>
        </div>
        
        <div class="intro-section">
          <h1>ä½ å¥½ï¼Œæˆ‘æ˜¯å‰ç«¯å¼€å‘è€…ï¼</h1>
          <p class="intro-text">
            çƒ­çˆ±æŠ€æœ¯çš„å‰ç«¯å·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äºåˆ›é€ ä¼˜é›…çš„ç”¨æˆ·ä½“éªŒã€‚
            å–œæ¬¢æ¢ç´¢æ–°æŠ€æœ¯ï¼Œåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œä¸æŠ€æœ¯ç¤¾åŒºä¸€èµ·æˆé•¿ã€‚
          </p>
          
          <div class="contact-links">
            <a href="mailto:your.email@example.com" class="contact-link">
              ğŸ“§ é‚®ç®±
            </a>
            <a href="https://github.com/yourusername" class="contact-link">
              ğŸ™ GitHub
            </a>
            <a href="https://twitter.com/yourusername" class="contact-link">
              ğŸ¦ Twitter
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <section class="stats-section">
      <h2>ğŸ“Š åšå®¢ç»Ÿè®¡</h2>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-icon">ğŸ“</div>
          <div class="stat-value">{totalPosts}</div>
          <div class="stat-label">ç¯‡æ–‡ç« </div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">ğŸ·ï¸</div>
          <div class="stat-value">{totalTags}</div>
          <div class="stat-label">ä¸ªæ ‡ç­¾</div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">ğŸ“…</div>
          <div class="stat-value">{daysDiff}</div>
          <div class="stat-label">å¤©è¿è¡Œ</div>
        </div>
        <div class="stat-item">
          <div class="stat-icon">ğŸ‘€</div>
          <div class="stat-value">1.2K</div>
          <div class="stat-label">æ¬¡è®¿é—®</div>
        </div>
      </div>
    </section>

    <!-- æŠ€èƒ½å±•ç¤º -->
    <section class="skills-section">
      <h2>ğŸ’ª æŠ€èƒ½æ ˆ</h2>
      <div class="skills-grid">
        {skills.map(skill => (
          <div class="skill-item">
            <div class="skill-header">
              <span class="skill-name">{skill.name}</span>
              <span class="skill-percentage">{skill.level}%</span>
            </div>
            <div class="skill-bar">
              <div 
                class="skill-progress" 
                style={`width: ${skill.level}%; background-color: ${skill.color}`}
              ></div>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- ä¸ªäººæ—¶é—´çº¿ -->
    <section class="timeline-section">
      <h2>â° æˆé•¿æ—¶é—´çº¿</h2>
      <div class="timeline">
        {timeline.map((item, index) => (
          <div class="timeline-item">
            <div class="timeline-marker">
              <span class="timeline-icon">{item.icon}</span>
            </div>
            <div class="timeline-content">
              <div class="timeline-year">{item.year}</div>
              <h3 class="timeline-title">{item.title}</h3>
              <p class="timeline-description">{item.description}</p>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- å…´è¶£çˆ±å¥½ -->
    <section class="interests-section">
      <h2>ğŸ¯ å…´è¶£çˆ±å¥½</h2>
      <div class="interests-grid">
        <div class="interest-item">
          <div class="interest-icon">ğŸ’»</div>
          <h3>ç¼–ç¨‹</h3>
          <p>çƒ­çˆ±ç¼–ç¨‹ï¼Œäº«å—è§£å†³é—®é¢˜çš„è¿‡ç¨‹</p>
        </div>
        <div class="interest-item">
          <div class="interest-icon">ğŸ“š</div>
          <h3>é˜…è¯»</h3>
          <p>å–œæ¬¢é˜…è¯»æŠ€æœ¯ä¹¦ç±å’Œç§‘å¹»å°è¯´</p>
        </div>
        <div class="interest-item">
          <div class="interest-icon">ğŸ®</div>
          <h3>æ¸¸æˆ</h3>
          <p>å¶å°”ç©æ¸¸æˆæ”¾æ¾ï¼Œç‰¹åˆ«æ˜¯ç‹¬ç«‹æ¸¸æˆ</p>
        </div>
        <div class="interest-item">
          <div class="interest-icon">ğŸµ</div>
          <h3>éŸ³ä¹</h3>
          <p>å¬éŸ³ä¹æ˜¯ç¼–ç¨‹æ—¶çš„æœ€ä½³ä¼´ä¾£</p>
        </div>
      </div>
    </section>
  </div>
</BaseLayout>

<style>
  .about-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 0;
  }

  /* è‹±é›„å¡ç‰‡ */
  .hero-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    padding: 3rem;
    margin-bottom: 3rem;
    color: white;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  }

  .hero-content {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 2rem;
    align-items: center;
  }

  .avatar-section {
    text-align: center;
  }

  .avatar {
    font-size: 5rem;
    margin-bottom: 1rem;
    display: block;
  }

  .status-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-size: 0.9rem;
    opacity: 0.9;
  }

  .status-dot {
    width: 8px;
    height: 8px;
    background: #48bb78;
    border-radius: 50%;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  .intro-section h1 {
    font-size: 2.5rem;
    margin: 0 0 1rem 0;
    font-weight: 700;
  }

  .intro-text {
    font-size: 1.2rem;
    line-height: 1.6;
    margin: 0 0 2rem 0;
    opacity: 0.9;
  }

  .contact-links {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .contact-link {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 25px;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .contact-link:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
  }

  /* ç»Ÿè®¡ä¿¡æ¯ */
  .stats-section {
    margin-bottom: 3rem;
  }

  .stats-section h2 {
    text-align: center;
    margin-bottom: 2rem;
    color: #2d3748;
    font-size: 2rem;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
  }

  .stat-item {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
    border: 1px solid #e2e8f0;
    transition: transform 0.3s ease;
  }

  .stat-item:hover {
    transform: translateY(-4px);
  }

  .stat-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .stat-value {
    font-size: 2.5rem;
    font-weight: 700;
    color: #2d3748;
    margin-bottom: 0.5rem;
  }

  .stat-label {
    color: #718096;
    font-size: 1rem;
  }

  /* æŠ€èƒ½æ ˆ */
  .skills-section {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    margin-bottom: 3rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
    border: 1px solid #e2e8f0;
  }

  .skills-section h2 {
    margin: 0 0 2rem 0;
    color: #2d3748;
    font-size: 1.8rem;
  }

  .skills-grid {
    display: grid;
    gap: 1.5rem;
  }

  .skill-item {
    background: #f7fafc;
    padding: 1.5rem;
    border-radius: 8px;
  }

  .skill-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.75rem;
  }

  .skill-name {
    font-weight: 600;
    color: #2d3748;
  }

  .skill-percentage {
    color: #718096;
    font-size: 0.9rem;
  }

  .skill-bar {
    height: 8px;
    background: #e2e8f0;
    border-radius: 4px;
    overflow: hidden;
  }

  .skill-progress {
    height: 100%;
    border-radius: 4px;
    transition: width 1s ease-in-out;
  }

  /* æ—¶é—´çº¿ */
  .timeline-section {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    margin-bottom: 3rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
    border: 1px solid #e2e8f0;
  }

  .timeline-section h2 {
    margin: 0 0 2rem 0;
    color: #2d3748;
    font-size: 1.8rem;
  }

  .timeline {
    position: relative;
    padding-left: 2rem;
  }

  .timeline::before {
    content: '';
    position: absolute;
    left: 1rem;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(to bottom, #3182ce, #e2e8f0);
  }

  .timeline-item {
    position: relative;
    margin-bottom: 2rem;
  }

  .timeline-marker {
    position: absolute;
    left: -2rem;
    top: 0;
    width: 3rem;
    height: 3rem;
    background: white;
    border: 3px solid #3182ce;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .timeline-icon {
    font-size: 1.2rem;
  }

  .timeline-content {
    padding-left: 1rem;
  }

  .timeline-year {
    color: #3182ce;
    font-weight: 600;
    font-size: 1.1rem;
  }

  .timeline-title {
    margin: 0.5rem 0;
    color: #2d3748;
    font-size: 1.3rem;
  }

  .timeline-description {
    color: #718096;
    line-height: 1.6;
    margin: 0;
  }

  /* å…´è¶£çˆ±å¥½ */
  .interests-section h2 {
    text-align: center;
    margin-bottom: 2rem;
    color: #2d3748;
    font-size: 2rem;
  }

  .interests-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
  }

  .interest-item {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
    border: 1px solid #e2e8f0;
    transition: transform 0.3s ease;
  }

  .interest-item:hover {
    transform: translateY(-4px);
  }

  .interest-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .interest-item h3 {
    margin: 0 0 1rem 0;
    color: #2d3748;
    font-size: 1.3rem;
  }

  .interest-item p {
    color: #718096;
    line-height: 1.6;
    margin: 0;
  }

  /* å“åº”å¼è®¾è®¡ */
  @media (max-width: 768px) {
    .hero-card {
      padding: 2rem;
      margin-left: -1rem;
      margin-right: -1rem;
      border-radius: 0;
    }

    .hero-content {
      grid-template-columns: 1fr;
      text-align: center;
      gap: 1.5rem;
    }

    .intro-section h1 {
      font-size: 2rem;
    }

    .contact-links {
      justify-content: center;
    }

    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .interests-grid {
      grid-template-columns: 1fr;
    }

    .timeline {
      padding-left: 1.5rem;
    }

    .timeline-marker {
      left: -1.5rem;
      width: 2.5rem;
      height: 2.5rem;
    }
  }
</style>