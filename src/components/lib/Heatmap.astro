---
interface Props {
  data?: number[];
  cellSize?: number;
  gap?: number;
  colors?: string[];
  title?: string;
}

const { 
  data = Array.from({ length: 35 }).map(() => Math.floor(Math.random() * 5)),
  cellSize = 14,
  gap = 4,
  colors = ['#161b22', '#0e4429', '#006d32', '#26a641', '#39d353'],
  title = "Activity Heatmap"
} = Astro.props;
---

<div class="heatmap-container">
  {title && <div class="heatmap-title">{title}</div>}
  <div class="heatmap-preview">
    <div class="grid" style={{ 
      gridTemplateColumns: `repeat(7, ${cellSize}px)`,
      gap: `${gap}px`
    }}>
      {data.map((level, i) => (
        <div 
          class={`cell level-${level}`} 
          style={{ 
            width: `${cellSize}px`, 
            height: `${cellSize}px`,
            backgroundColor: colors[level]
          }}
          title={`Level ${level}`}
        ></div>
      ))}
    </div>
  </div>
  <div class="heatmap-legend">
    <span>Less</span>
    <div class="legend-cells">
      {colors.map((color, i) => (
        <div class="legend-cell" style={{ backgroundColor: color }}></div>
      ))}
    </div>
    <span>More</span>
  </div>
</div>

<style>
  .heatmap-container {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding: 1.25rem;
    background: var(--glass-bg);
    border: var(--glass-border);
    border-radius: 12px;
    box-shadow: var(--glass-shadow);
  }

  .heatmap-title {
    font-size: 0.8rem;
    font-family: var(--font-mono);
    color: var(--color-neutral);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .heatmap-preview {
    display: flex;
    justify-content: center;
  }

  .grid {
    display: grid;
  }

  .cell {
    border-radius: 2px;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .cell:hover {
    transform: scale(1.2);
    z-index: 2;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
  }

  .heatmap-legend {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 0.5rem;
    font-size: 0.7rem;
    color: var(--color-neutral);
  }

  .legend-cells {
    display: flex;
    gap: 3px;
  }

  .legend-cell {
    width: 10px;
    height: 10px;
    border-radius: 2px;
  }
</style>
