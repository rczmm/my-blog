---
import AetherLayout from './AetherLayout.astro';

const { frontmatter, headings } = Astro.props;

// ËÆ°ÁÆóÂ≠óÊï∞ÂíåÈòÖËØªÊó∂Èó¥
const content = frontmatter.content || '';
const wordCount = content.replace(/[#*`\-\[\]()\n\s]/g, '').length || (headings ? headings.length * 100 : 1200); // Â¶ÇÊûúÊ≤°ÊúâcontentÔºåÊåâÊ†áÈ¢òÊï∞Èáè‰º∞ÁÆó
const readingTime = Math.ceil(wordCount / 400);

// Ê†ºÂºèÂåñÊó•Êúü
const formattedDate = new Date(frontmatter.pubDate).toLocaleDateString('zh-CN', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

// Ëé∑ÂèñÊâÄÊúâÊñáÁ´†‰ª•Áî®‰∫éÊé®ËçêÂíåÂØºËà™
const allPosts = await Astro.glob('../pages/posts/*.md');
const sortedPosts = allPosts.sort((a, b) => new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf());

// Êü•ÊâæÂΩìÂâçÊñáÁ´†Á¥¢Âºï
const currentPostIndex = sortedPosts.findIndex(post => post.url === Astro.url.pathname);
const prevPost = currentPostIndex < sortedPosts.length - 1 ? sortedPosts[currentPostIndex + 1] : null;
const nextPost = currentPostIndex > 0 ? sortedPosts[currentPostIndex - 1] : null;

const recentPosts = sortedPosts.slice(0, 3);
---

<AetherLayout title={frontmatter.title}>
  <div class="post-layout-wrapper">
    <!-- È°∂ÈÉ®Ê†áÈ¢òÂç°Áâá - Âç†ÊçÆËæÉÂÆΩÂå∫Âüü -->
    <header class="post-header glass-card">
      <div class="post-card-layout">
        <!-- Â∑¶‰æßÂõæÊ†áÂå∫Âüü -->
        <div class="post-icon-section">
          <div class="stat-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
          </div>
          <div class="post-index-label">ARTICLE_LOG</div>
        </div>

        <!-- ÂÜÖÂÆπÂå∫Âüü -->
        <div class="post-header-content">
          <div class="header-meta-row">
            <div class="meta-item">
              <span class="meta-label">ID</span>
              <span class="meta-value">#{Math.floor(Math.random() * 9000) + 1000}</span>
            </div>
            <div class="meta-divider"></div>
            <div class="meta-item">
              <span class="meta-label">Â≠óÊï∞ÁªüËÆ°</span>
              <span class="meta-value">{wordCount.toLocaleString()} Â≠ó</span>
            </div>
            <div class="meta-divider"></div>
            <div class="meta-item">
              <span class="meta-label">È¢ÑËÆ°ÈòÖËØª</span>
              <span class="meta-value">{readingTime} ÂàÜÈíü</span>
            </div>
            <div class="meta-divider"></div>
            <div class="meta-item">
              <span class="meta-label">Áä∂ÊÄÅ</span>
              <span class="meta-value active">Êï∞ÊçÆÂ∑≤ÂêåÊ≠•</span>
            </div>
          </div>

          <h1 class="post-title">{frontmatter.title}</h1>

          <div class="post-author-row">
            <div class="author-info">
              <span class="info-icon">üë§</span>
              <span class="info-text">{frontmatter.author}</span>
            </div>
            <div class="author-info">
              <span class="info-icon">üìÖ</span>
              <span class="info-text">{formattedDate}</span>
            </div>
            {frontmatter.tags && (
              <div class="author-info">
                <span class="info-icon">üè∑Ô∏è</span>
                <span class="tags-list">
                  {frontmatter.tags.map((tag: string) => (
                    <span class="tag-item">{tag}</span>
                  ))}
                </span>
              </div>
            )}
          </div>
        </div>
      </div>
      <!-- ËæπÁºòË£ÖÈ•∞‰∫§‰∫í -->
      <div class="header-decoration decoration-tl"></div>
      <div class="header-decoration decoration-tr"></div>
    </header>

    <div class="layout-grid">
      <!-- Â∑¶‰æßÔºöÁ©∫‰ΩçÊàñÈ¢ÑÁïô -->
      <aside class="sidebar-left">
        <!-- ÂèØ‰ª•Âú®ËøôÈáåÊîæ‰∏Ä‰∫õÊ¨°Ë¶Å‰ø°ÊÅØÔºåÊàñËÄÖ‰øùÊåÅÁïôÁôΩ -->
      </aside>

      <!-- ‰∏≠Èó¥ÔºöÊñáÁ´†‰∏ªÂÜÖÂÆπ -->
      <article class="post-container">
        <!-- ÊñáÁ´†ÂÜÖÂÆπ -->
        <div class="post-content glass-card">
          <div class="content-wrapper">
            <slot />
          </div>
        </div>

        <!-- Â∫ïÈÉ®ÂØºËà™ -->
        <div class="post-footer">
          <div class="post-nav">
            {prevPost ? (
              <a href={prevPost.url} class="nav-link prev glass-card">
                <div class="nav-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m15 18-6-6 6-6"></path>
                  </svg>
                </div>
                <div class="nav-content">
                  <span class="nav-label">PREVIOUS</span>
                  <span class="nav-text">{prevPost.frontmatter.title}</span>
                </div>
              </a>
            ) : <div class="nav-placeholder"></div>}

            <a href="/" class="back-home-link glass-card">
              <div class="back-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="m12 19-7-7 7-7"></path>
                  <path d="M19 12H5"></path>
                </svg>
              </div>
              <div class="back-content">
                <span class="back-label">RETURN</span>
                <span class="back-text">ËøîÂõûÊó•ÂøóÂàóË°®</span>
              </div>
              <div class="back-decoration"></div>
            </a>

            {nextPost ? (
              <a href={nextPost.url} class="nav-link next glass-card">
                <div class="nav-content">
                  <span class="nav-label">NEXT</span>
                  <span class="nav-text">{nextPost.frontmatter.title}</span>
                </div>
                <div class="nav-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m9 18 6-6-6-6"></path>
                  </svg>
                </div>
              </a>
            ) : <div class="nav-placeholder"></div>}
          </div>
        </div>
      </article>

      <!-- Âè≥‰æßÔºö‰æßËæπÊ†èÈõÜÂêà -->
      <aside class="sidebar-right">
        <!-- ÊúÄÊñ∞‰º†Ëæì -->
        <div class="sidebar-widget glass-card">
          <div class="widget-title">ÊúÄÊñ∞‰º†Ëæì</div>
          <ul class="recent-posts">
            {recentPosts.map((post) => (
              <li>
                <a href={post.url} class="recent-link">
                  <span class="recent-title">{post.frontmatter.title}</span>
                  <span class="recent-date">{new Date(post.frontmatter.pubDate).toLocaleDateString()}</span>
                </a>
              </li>
            ))}
          </ul>
        </div>

        <!-- ÊñáÁ´†ÁõÆÂΩï (ÊîæÂú®ÊúÄÊñ∞‰º†Ëæì‰∏ãÈù¢) -->
        {headings && headings.length > 0 && (
          <div class="sidebar-widget glass-card sticky-widget">
            <div class="widget-title">ÊñáÁ´†ÁõÆÂΩï</div>
            <nav class="toc">
              <ul>
                {headings.map((heading: any) => (
                  <li class={`toc-item depth-${heading.depth}`}>
                    <a href={`#${heading.slug}`}>{heading.text}</a>
                  </li>
                ))}
              </ul>
            </nav>
          </div>
        )}
      </aside>
    </div>
  </div>

  <!-- ËøîÂõûÈ°∂ÈÉ®ÊåâÈíÆ -->
  <button id="back-to-top" class="back-to-top-btn glass-card" aria-label="ËøîÂõûÈ°∂ÈÉ®">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="18 15 12 9 6 15"></polyline>
    </svg>
  </button>
</AetherLayout>

<script>
  const backToTopBtn = document.getElementById('back-to-top');
  
  window.addEventListener('scroll', () => {
    if (window.scrollY > 300) {
      backToTopBtn?.classList.add('show');
    } else {
      backToTopBtn?.classList.remove('show');
    }
  });

  backToTopBtn?.addEventListener('click', () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });
</script>

<style>
  .post-layout-wrapper {
    max-width: 95%;
    margin: 0 auto;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .layout-grid {
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 2.5rem;
    align-items: start;
  }

  /* ‰æßËæπÊ†èÂ∏ÉÂ±Ä */
  .sidebar-left {
    display: none;
  }

  .sidebar-right {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  /* È°∂ÈÉ®Ê†áÈ¢òÂç°Áâá */
  .post-header {
    padding: 3rem;
    position: relative;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  .post-header:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(6, 182, 212, 0.15);
    border-color: var(--color-primary-start);
  }

  .post-card-layout {
    display: flex;
    gap: 2.5rem;
    align-items: center;
  }

  .post-icon-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    flex-shrink: 0;
  }

  .stat-icon {
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(6, 182, 212, 0.1);
    border-radius: 16px;
    color: var(--color-primary-start);
    border: 1px solid rgba(6, 182, 212, 0.2);
    box-shadow: 0 0 20px rgba(6, 182, 212, 0.1);
    transition: all 0.3s ease;
  }

  .post-header:hover .stat-icon {
    background: rgba(6, 182, 212, 0.2);
    transform: rotate(5deg) scale(1.1);
    box-shadow: 0 0 30px rgba(6, 182, 212, 0.3);
  }

  .post-index-label {
    font-size: 0.7rem;
    color: var(--color-neutral);
    font-family: var(--font-mono),serif;
    letter-spacing: 0.2em;
    font-weight: 600;
  }

  .post-header-content {
    flex: 1;
    min-width: 0;
  }

  .header-meta-row {
    display: flex;
    align-items: center;
    gap: 1.25rem;
    margin-bottom: 1.5rem;
    font-family: var(--font-mono);
    font-size: 0.85rem;
    flex-wrap: wrap;
  }

  .meta-divider {
    width: 1px;
    height: 12px;
    background: var(--color-neutral-light);
    opacity: 0.5;
  }

  .meta-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .meta-label {
    color: var(--color-neutral);
    font-size: 0.75rem;
  }

  .meta-value {
    color: var(--color-text-title);
    font-weight: 600;
  }

  .meta-value.active {
    color: #10b981;
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }

  .meta-value.active::before {
    content: '';
    width: 8px;
    height: 8px;
    background: currentColor;
    border-radius: 50%;
    box-shadow: 0 0 10px currentColor;
    animation: pulse 2s infinite;
  }

  .post-title {
    font-size: 3rem;
    font-weight: 800;
    color: var(--color-text-title);
    margin: 0 0 1.5rem 0;
    line-height: 1.1;
    letter-spacing: -0.03em;
    word-break: break-word;
    background: linear-gradient(to right, var(--color-text-title), var(--color-primary-start));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .post-author-row {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    padding-top: 1.5rem;
    border-top: 1px dashed var(--color-neutral-light);
  }

  .author-info {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    color: var(--color-text-body);
    font-size: 0.95rem;
  }

  .tags-list {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .tag-item {
    background: rgba(6, 182, 212, 0.1);
    color: var(--color-primary-start);
    padding: 0.1rem 0.6rem;
    border-radius: 4px;
    font-size: 0.8rem;
    border: 1px solid rgba(6, 182, 212, 0.2);
  }

  /* Ë£ÖÈ•∞‰∫§‰∫í */
  .header-decoration {
    position: absolute;
    width: 40px;
    height: 40px;
    pointer-events: none;
    transition: all 0.3s ease;
  }

  .decoration-tl {
    top: -1px;
    left: -1px;
    border-top: 3px solid var(--color-primary-start);
    border-left: 3px solid var(--color-primary-start);
    border-radius: 8px 0 0 0;
  }

  .decoration-tr {
    top: -1px;
    right: -1px;
    border-top: 3px solid var(--color-primary-end);
    border-right: 3px solid var(--color-primary-end);
    border-radius: 0 8px 0 0;
  }

  .post-header:hover .header-decoration {
    width: 60px;
    height: 60px;
    opacity: 0.8;
  }

  /* ‰æßËæπÊ†èÂèäÁªÑ‰ª∂ */
  .sticky-widget {
    position: sticky;
    top: 2rem;
  }

  .sidebar {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  /* ÂìçÂ∫îÂºèË∞ÉÊï¥ */
  @media (max-width: 1440px) {
    .post-layout-wrapper {
      max-width: 100%;
      padding: 1.5rem;
    }
  }

  @media (max-width: 1280px) {
    .layout-grid {
      grid-template-columns: 1fr;
    }
    .sidebar-right {
      display: none;
    }
  }

  @media (max-width: 1024px) {
    .layout-grid {
      grid-template-columns: 1fr;
    }
    
    .sidebar-left, .sidebar-right {
      display: none;
    }

    .post-title {
      font-size: 2.2rem;
    }
    
    .post-card-layout {
      flex-direction: column;
      align-items: flex-start;
      gap: 1.5rem;
    }
  }

  @keyframes pulse {
    0% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.2); }
    100% { opacity: 1; transform: scale(1); }
  }

  /* ‰øùÊåÅÂéüÊúâÂÜÖÂÆπÊ†∑Âºè */
  .post-container {
    min-width: 0;
  }
  
  .post-content {
    padding: 2.5rem;
    line-height: 1.8;
  }
  
  .content-wrapper :global(h2) {
    font-size: 1.8rem;
    margin: 3rem 0 1.5rem;
    color: var(--color-text-title);
    padding-left: 1rem;
    border-left: 4px solid var(--color-primary-start);
    background: linear-gradient(to right, rgba(6, 182, 212, 0.05), transparent);
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    scroll-margin-top: 100px;
  }

  .content-wrapper :global(h3) {
    font-size: 1.4rem;
    margin: 2.5rem 0 1rem;
    color: var(--color-text-title);
    display: flex;
    align-items: center;
    scroll-margin-top: 100px;
  }

  .content-wrapper :global(h3)::before {
    content: '#';
    color: var(--color-primary-start);
    margin-right: 0.5rem;
    font-family: var(--font-mono);
    font-weight: 400;
  }

  .content-wrapper :global(ul), 
  .content-wrapper :global(ol) {
    margin-bottom: 1.5rem;
    padding-left: 0;
    list-style: none;
  }

  .content-wrapper :global(li) {
    margin-bottom: 0.75rem;
    position: relative;
    padding-left: 1.75rem;
    color: var(--color-text-body);
    line-height: 1.7;
  }

  /* Êó†Â∫èÂàóË°®Ê†∑Âºè */
  .content-wrapper :global(ul > li)::before {
    content: '';
    position: absolute;
    left: 0.5rem;
    top: 0.7rem;
    width: 6px;
    height: 6px;
    background: var(--color-primary-start);
    border-radius: 50%;
    box-shadow: 0 0 8px var(--color-primary-start);
  }

  /* ÊúâÂ∫èÂàóË°®Ê†∑Âºè */
  .content-wrapper :global(ol) {
    counter-reset: list-counter;
  }

  .content-wrapper :global(ol > li) {
    counter-increment: list-counter;
  }

  .content-wrapper :global(ol > li)::before {
    content: counter(list-counter);
    position: absolute;
    left: 0;
    top: 0.2rem;
    width: 1.2rem;
    height: 1.2rem;
    background: rgba(6, 182, 212, 0.1);
    color: var(--color-primary-start);
    font-size: 0.75rem;
    font-weight: 700;
    font-family: var(--font-mono);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    border: 1px solid rgba(6, 182, 212, 0.2);
  }

  /* Â§ÑÁêÜÂµåÂ•óÂàóË°® */
  .content-wrapper :global(li ul),
  .content-wrapper :global(li ol) {
    margin-top: 0.75rem;
    margin-bottom: 0.5rem;
  }


  /* ‰ª£Á†ÅÂùóÂ¢ûÂº∫Ê†∑Âºè */
  .content-wrapper :global(pre) {
    background: #0d1117;
    color: #e6edf3;
    padding: 2.5rem 1.5rem 1.5rem;
    border-radius: 12px;
    overflow-x: auto;
    margin: 2.5rem 0;
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
  }

  .content-wrapper :global(pre)::before {
    content: '';
    position: absolute;
    top: 1rem;
    left: 1rem;
    width: 12px;
    height: 12px;
    background: #ff5f56;
    border-radius: 50%;
    box-shadow: 20px 0 0 #ffbd2e, 40px 0 0 #27c93f;
    z-index: 1;
  }

  .content-wrapper :global(p > code) {
    background: rgba(59, 130, 246, 0.1);
    color: var(--color-text-code);
    padding: 0.2rem 0.5rem;
    border-radius: 6px;
    font-size: 0.9em;
    border: 1px solid rgba(59, 130, 246, 0.2);
  }

  /* Ë°®Ê†ºÊ†∑Âºè */
  .content-wrapper :global(table) {
    width: 100%;
    border-collapse: collapse;
    margin: 2rem 0;
    font-size: 0.95rem;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }

  .content-wrapper :global(th) {
    background-color: #f8fafc;
    color: var(--color-text-title);
    font-weight: 600;
    text-align: left;
    padding: 0.75rem 1rem;
    border-bottom: 2px solid #e2e8f0;
  }

  .content-wrapper :global(td) {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #f1f5f9;
    color: var(--color-text-body);
  }

  .content-wrapper :global(tr:hover td) {
    background-color: #f8fafc;
  }

  /* ËøîÂõûÈ°∂ÈÉ®ÊåâÈíÆÊ†∑Âºè */
  .back-to-top-btn {
    position: fixed;
    bottom: 4rem;
    right: 30rem;
    width: 56px;
    height: 56px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--glass-bg);
    backdrop-filter: blur(12px);
    color: var(--color-primary-start);
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transform: translateY(20px);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 9999;
    border: 1px solid var(--color-primary-start);
    box-shadow: 0 8px 32px rgba(6, 182, 212, 0.2);
  }

  .back-to-top-btn.show {
    opacity: 0.4;
    visibility: visible;
    transform: translateY(0);
  }

  .back-to-top-btn:hover {
    background: var(--color-primary-start);
    color: white;
    transform: translateY(-8px) scale(1.1);
    box-shadow: 0 15px 30px rgba(6, 182, 212, 0.4);
    border-color: transparent;
  }

  .back-to-top-btn svg {
    width: 28px;
    height: 28px;
    transition: transform 0.3s ease;
  }

  .back-to-top-btn:hover svg {
    transform: translateY(-2px);
  }

  /* ‰øÆÂ§çÈÅÆÁõñÊÉÖÂÜµ */
  .sticky-widget {
    position: sticky;
    top: 2rem;
    z-index: 10;
  }

  .sidebar-widget {
    z-index: 5;
  }
  
  .post-footer {
    margin-top: 5rem;
    padding-top: 3rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .post-nav {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 1.5rem;
    align-items: stretch;
  }

  .nav-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.5rem;
    text-decoration: none;
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.1);
    min-width: 0;
  }

  .nav-placeholder {
    visibility: hidden;
  }

  .nav-content {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
    min-width: 0;
  }

  .nav-label {
    font-size: 0.6rem;
    font-family: var(--font-mono);
    color: var(--color-neutral);
    letter-spacing: 0.1em;
  }

  .nav-text {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--color-text-title);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .nav-icon {
    color: var(--color-primary-start);
    flex-shrink: 0;
    transition: transform 0.3s ease;
  }

  .nav-link:hover {
    border-color: var(--color-primary-start);
    background: rgba(6, 182, 212, 0.05);
    transform: translateY(-2px);
  }

  .nav-link.prev:hover .nav-icon {
    transform: translateX(-5px);
  }

  .nav-link.next:hover .nav-icon {
    transform: translateX(5px);
  }

  .nav-link.next {
    text-align: right;
    justify-content: flex-end;
  }

  .back-home-link {
    display: flex;
    align-items: center;
    gap: 1.25rem;
    padding: 1rem 2rem;
    text-decoration: none;
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 1px solid rgba(255, 255, 255, 0.2);
    white-space: nowrap;
  }

  @media (max-width: 1024px) {
    .post-nav {
      grid-template-columns: 1fr;
    }
    .back-home-link {
      order: -1;
    }
  }
  
  .back-icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(6, 182, 212, 0.1);
    border-radius: 10px;
    color: var(--color-primary-start);
    transition: all 0.3s ease;
  }

  .back-content {
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
  }

  .back-label {
    font-size: 0.65rem;
    font-family: var(--font-mono);
    color: var(--color-neutral);
    letter-spacing: 0.15em;
    font-weight: 700;
  }

  .back-text {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--color-text-title);
  }

  .back-decoration {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 3px;
    background: linear-gradient(to right, var(--color-primary-start), var(--color-primary-end));
    transition: width 0.4s ease;
  }
  
  .back-home-link:hover {
    transform: translateX(-10px);
    border-color: var(--color-primary-start);
    box-shadow: 0 15px 30px rgba(6, 182, 212, 0.15);
  }

  .back-home-link:hover .back-icon {
    background: var(--color-primary-start);
    color: white;
    transform: scale(1.1);
  }

  .back-home-link:hover .back-decoration {
    width: 100%;
  }

  .sidebar-widget {
    padding: 1.5rem;
  }

  .widget-title {
    font-size: 0.9rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1.25rem;
    color: var(--color-neutral-dark);
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .widget-title::before {
    content: '';
    width: 4px;
    height: 16px;
    background: var(--color-primary-start);
    border-radius: 2px;
  }

  .toc ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .toc-item {
    margin-bottom: 0.75rem;
  }

  .toc-item.depth-3 {
    padding-left: 1rem;
    font-size: 0.9em;
    opacity: 0.8;
  }

  .toc-item a {
    text-decoration: none;
    color: var(--color-text-body);
    transition: all 0.2s;
    display: block;
    line-height: 1.4;
  }

  .toc-item a:hover {
    color: var(--color-primary-start);
    transform: translateX(3px);
  }

  .recent-posts {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .recent-link {
    text-decoration: none;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .recent-title {
    font-size: 0.95rem;
    color: var(--color-text-title);
    font-weight: 600;
    line-height: 1.3;
  }

  .recent-date {
    font-size: 0.8rem;
    color: var(--color-neutral);
  }
</style>